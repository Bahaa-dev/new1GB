try: 
 import requests,json,pyfiglet,termcolor,threading
 ##------------------##
 logo = pyfiglet.figlet_format('ERROR404')
 mb = pyfiglet.figlet_format("1GB offer")
 descr = """
  By: ERROR404
  Facebook: fb.com/b1231
  """
 print(termcolor.colored(logo, color="red"), termcolor.colored(mb, color="blue"), termcolor.colored(descr, color="green"))
 print('=' * 50)
 ## ------------------ End Descraption Script ------------------##
 number =("01050096464")
 pwd =("mpkfa_N81")
 with requests.Session() as req:
  ## token
  def token():
   url = 'https://mobile.vodafone.com.eg/services/security/oauth/oauth/token'
   header = {
   'Accept': 'application/json, text/plain, */*',
   'api-host': 'token',
   'Connection': 'keep-alive',
   'Content-Type': 'application/x-www-form-urlencoded',
   'Host':'mobile.vodafone.com.eg',
   'Accept-Encoding': 'gzip',
   'User-Agent': 'okhttp/3.12.1'
   }
   formData = {
   'username': number,
   'password': pwd,
   'client_secret':'secret',
   'grant_type':'password',
   'client_id':'my-trusted-client'
   }
   sendData = req.post(url,headers = header, data = formData)
   access_token = sendData.json()['access_token']
   return access_token
  ##------ End token -------##

  ## Offer 400 MB
  def offer400MB():
   url = 'https://mobile.vodafone.com.eg/services/dxl/pom/productOrder'
   header = {
   'api-host': 'ProductOrderingManagementHost',
   'useCase': 'MIProfile',
   'Accept': 'application/json',
   'access-token': token(),
   'msisdn': number,
   'Accept-Language': 'ar',
   'Content-Type': 'application/json; charset=UTF-8',
   'Host': 'mobile.vodafone.com.eg',
   'Connection': 'Keep-Alive',
   'Accept-Encoding': 'gzip',
   'User-Agent': 'okhttp/3.12.1'
   }
   payload = {"channel":{"name":"MobileApp"},"characteristic":[],
   "orderItem":[{"action":"add","product":{"characteristic":[{"name":"LangId",
   "value":"ar"},{"name":"ExecutionType","value":"Sync"}],"id":"120",
   "relatedParty":[{"id":f"{number}","name":"MSISDN","role":"Subscriber"}],
   "@type":"MI"}}],"@type":"MIProfile"}

   sendData = req.post(url,headers = header, data = json.dumps(payload))
   state = sendData.json()
   if str(state).find("state") != -1:
    print('>'*50)
    print("  Done Sending 1GB Thx ")
    print('>'*50)
   else:
    print(" ERROR404 Sorry Something Went Wrong") 
  offer400MB()
except KeyError:
 print(" [False] Username or Password.")